<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>PaperMind PDF Reader</title>
    <link rel="stylesheet" href="../assets/styles.css">
    <!-- Libraries -->
    <script src="../lib/pdf.js"></script>
    <script src="../lib/spark-md5.js"></script>
    <script src="../lib/marked.min.js"></script>
</head>
<body>
    <div class="container">
        <!-- Sidebar -->
        <aside class="sidebar" id="sidebar" style="width: 300px;">
            <div class="sidebar-header">
                <h2>PaperMind</h2>
                <div class="header-actions">
                    <button id="open-file-btn" title="æ‰“å¼€æœ¬åœ° PDF">ğŸ“„</button>
                    <button id="open-url-btn" title="æ‰“å¼€åœ¨çº¿ PDF">ğŸŒ</button>
                    <button id="settings-btn" title="è®¾ç½®">âš™ï¸</button>
                </div>
                <input type="file" id="file-input" accept=".pdf" style="display: none;">
            </div>
            
            <div id="notes-panel" class="content-panel">
                <div id="notes-list" class="notes-list-container">
                    <!-- Notes and AI explanations will be injected here -->
                    <div class="empty-state">æš‚æ— ç¬”è®°ï¼Œé€‰ä¸­æ–‡å­—æ·»åŠ </div>
                </div>
                <div class="bottom-actions">
                     <button id="btn-generate-report" class="action-btn" style="width: 100%;">ç”Ÿæˆ AI é˜…è¯»æŠ¥å‘Š</button>
                </div>
            </div>

            <!-- Resize Handle -->
            <div class="resize-handle" id="resize-handle"></div>
        </aside>

        <!-- Main PDF Viewer -->
        <main class="viewer-container">
            <div id="status-bar" class="hidden"></div>
            <!-- Toolbar for Zoom -->
            <div class="toolbar">
                <button id="zoom-out-btn" title="ç¼©å°">-</button>
                <span id="zoom-level">120%</span>
                <button id="zoom-in-btn" title="æ”¾å¤§">+</button>
            </div>
            <div id="pdf-viewer"></div>
        </main>
    </div>

    <!-- Floating Menu (Initially Hidden) -->
    <div id="floating-menu" class="hidden">
        <button id="btn-add-note">åŠ å…¥ç¬”è®°</button>
        <button id="btn-ai-explain">AI è§£é‡Š</button>
    </div>

    <!-- URL Input Modal -->
    <div id="url-modal" class="modal hidden">
        <div class="modal-content">
            <h3>æ‰“å¼€åœ¨çº¿ PDF</h3>
            <input type="text" id="url-input" placeholder="è¾“å…¥ PDF é“¾æ¥ (https://...)">
            <div class="modal-actions">
                <button id="btn-cancel-url">å–æ¶ˆ</button>
                <button id="btn-confirm-url" class="primary">æ‰“å¼€</button>
            </div>
        </div>
    </div>

    <!-- Settings Modal -->
    <div id="settings-modal" class="modal hidden">
        <div class="modal-content">
            <h3>è®¾ç½® AI</h3>
            <div style="margin-bottom: 15px;">
                <label style="display:block; margin-bottom:5px; font-weight:bold;">API Key</label>
                <input type="password" id="settings-key" placeholder="sk-..." style="width:100%; padding:8px; box-sizing:border-box; border:1px solid #ccc; border-radius:4px;">
            </div>
            <div style="margin-bottom: 15px;">
                <label style="display:block; margin-bottom:5px; font-weight:bold;">Model Name</label>
                <input type="text" id="settings-model" placeholder="deepseek-chat" value="deepseek-chat" style="width:100%; padding:8px; box-sizing:border-box; border:1px solid #ccc; border-radius:4px;">
                <small style="color:#666; font-size:12px;">æ¨è: deepseek-chat</small>
            </div>
            <div class="modal-actions">
                <button id="btn-cancel-settings">å–æ¶ˆ</button>
                <button id="btn-save-settings" class="primary">ä¿å­˜</button>
            </div>
        </div>
    </div>

    <!-- Loading Overlay -->
    <div id="loading-overlay" class="loading-overlay hidden">
        <div class="spinner"></div>
        <div class="loading-text" id="loading-text">Loading...</div>
    </div>

    <!-- Scripts -->
    <script src="storage.js"></script>
    <script src="ai-service.js"></script>
    <script src="viewer.js"></script>
</body>
</html>
